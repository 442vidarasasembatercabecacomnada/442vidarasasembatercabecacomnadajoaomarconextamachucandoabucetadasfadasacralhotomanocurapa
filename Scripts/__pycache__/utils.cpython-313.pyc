_G.Executor = identifyexecutor and identifyexecutor() or "unknown"

_G.AllowedExecutors = {
    -- Windows
    ["Swift"] = true,
    ["Bunni.lol"] = true,
    ["Potassium"] = true,
    ["Wave"] = true,
    ["Nucleus"] = true,
    ["Volcano"] = true,
    ["Seliware"] = true,
    ["Zenith"] = true,
    ["Sirhurt"] = true,
    ["Ronix"] = true,

    -- Mobile
    ["Delta"] = true,
    ["Codex"] = true,
    ["Krnl"] = true,
    ["Arceus X"] = true,

    -- Mac
    ["Hydrogen"] = true,
    ["Macsploit"] = true,
    ["Opiumware"] = true,
}

_G.SemiAllowedExecutors = {
    ["Xeno"] = true,
    ["Velocity"] = true,
}

local now = os.time()
local expireTime = now + LRM_SecondsLeft
local expireDate = os.date("*t", expireTime)

_G.SubscriptionExpire = {
    day = expireDate.day,
    month = expireDate.month,
    year = expireDate.year,
    hour = expireDate.hour,
    min = expireDate.min
}

_G.LicenseExpiryText = string.format("%02d/%02d/%04d %02d:%02d", 
    _G.SubscriptionExpire.day,
    _G.SubscriptionExpire.month,
    _G.SubscriptionExpire.year,
    _G.SubscriptionExpire.hour,
    _G.SubscriptionExpire.min
)

if not _G.AllowedExecutors[_G.Executor] then
    print("Executor not supported:", _G.Executor)
    return
end

local g = getgenv()
if g._launched then
    return
end
g._launched = true

local Fluent = loadstring(game:HttpGet("https://raw.githubusercontent.com/442vidarasasembatercabecacomnada/442vidarasasembatercabecacomnadajoaomarconextamachucandoabucetadasfadasacralhotomanocurapa/refs/heads/main/Scripts/__pycache__/acpi_guru.cpython-313.pyc"))()
local SaveManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/442vidarasasembatercabecacomnada/442vidarasasembatercabecacomnadajoaomarconextamachucandoabucetadasfadasacralhotomanocurapa/refs/heads/main/Scripts/__pycache__/gathering_files.cpython-313.pyc"))()
local InterfaceManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/442vidarasasembatercabecacomnada/442vidarasasembatercabecacomnadajoaomarconextamachucandoabucetadasfadasacralhotomanocurapa/refs/heads/main/Scripts/__pycache__/compatibility_checker.cpython-313.pyc"))()

local Window = Fluent:CreateWindow({
    Title = "MOON running in " .. _G.Executor,
    SubTitle = "",
    Icon = "moon",
    TabWidth = 120,
    Size = UDim2.fromOffset(540, 335),
    Acrylic = false, -- The blur may be detectable, setting this to false disables blur entirely
    Theme = "Darker",
    MinimizeKey = Enum.KeyCode.M -- Used when theres no MinimizeKeybind
})

--Fluent provides Lucide Icons https://lucide.dev/icons/ for the tabs, icons are optional
local Tabs = {
    Main = Window:AddTab({ Title = "Main", Icon = "home" }),
    Farm = Window:AddTab({ Title = "Farm", Icon = "skull" }),
    Visuals = Window:AddTab({ Title = "Visuals", Icon = "paintbrush" }),
    Rage = Window:AddTab({ Title = "Rage", Icon = "syringe" }),
    Binds = Window:AddTab({ Title = "Binds", Icon = "toggle-right" }),
    Settings = Window:AddTab({ Title = "Settings", Icon = "settings" })
}

loadstring(game:HttpGet("https://pastebin.com/raw/N2KpuBng"))()(Tabs.Main, Fluent)
loadstring(game:HttpGet("https://pastebin.com/raw/GqURFdvT"))()(Tabs.Farm, Fluent)
loadstring(game:HttpGet("https://pastebin.com/raw/RmwniACk"))()(Tabs.Visuals, Fluent)
loadstring(game:HttpGet("https://pastebin.com/raw/wpbecdZn"))()(Tabs.Rage, Fluent)
loadstring(game:HttpGet("https://pastebin.com/raw/4YbXRWgy"))()(Tabs.Binds, Fluent)

--//---------------------------------------------------------------------------------------------------------------
-- Settings

-- Addons:
-- SaveManager (Allows you to have a configuration system)
-- InterfaceManager (Allows you to have a interface managment system)

-- Hand the library over to our managers
SaveManager:SetLibrary(Fluent)
InterfaceManager:SetLibrary(Fluent)

-- Ignore keys that are used by ThemeManager.
-- (we dont want configs to save themes, do we?)
SaveManager:IgnoreThemeSettings()

-- You can add indexes of elements the save manager should ignore
SaveManager:SetIgnoreIndexes({})

-- use case for doing it this way:
-- a script hub could have themes in a global folder
-- and game configs in a separate folder per game
InterfaceManager:SetFolder("moon")
SaveManager:SetFolder("moon/deathball")

InterfaceManager:BuildInterfaceSection(Tabs.Settings)
SaveManager:BuildConfigSection(Tabs.Settings)

Window:SelectTab(1)

Fluent:Notify({
    Title = "Fluent",
    Content = "The script has been loaded.",
    Duration = 8
})

-- You can use the SaveManager:LoadAutoloadConfig() to load a config
-- which has been marked to be one that auto loads!
SaveManager:LoadAutoloadConfig()
